{"componentChunkName":"component---src-templates-blog-post-js","path":"/hackergame-2020-writeup/","result":{"data":{"site":{"siteMetadata":{"title":"eternitrance"}},"markdownRemark":{"id":"69bd0235-f401-559b-99e4-b8edfc727fdd","excerpt":"手痒，花半天玩了下，剩下的就都卡住了。 做了签到、2048、一闪而过的 Flag、从零开始的记账工具人、233 同学的 Docker 签到 e4PJzv 打开题目，能看见这样的一个页面，包括一个可拖拽 range 和一个提取 button。那我们现在可做的是，拖拽 range 到…","html":"<blockquote>\n<p>手痒，花半天玩了下，剩下的就都卡住了。</p>\n<p>做了签到、2048、一闪而过的 Flag、从零开始的记账工具人、233 同学的 Docker</p>\n</blockquote>\n<h2>签到</h2>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/e4PJzv.png\" alt=\"e4PJzv\"></p>\n<p>打开题目，能看见这样的一个页面，包括一个可拖拽 range 和一个提取 button。那我们现在可做的是，拖拽 range 到 1？</p>\n<p>那么恭喜你，将触发一个“没想到吧！”的 <code class=\"language-text\">console.log()</code>，生怕你没有被惊喜到。再看看源代码？</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 也就是说，如果 range 为 1，则触发一个 log，和值的修改。所以别费力拖和用方向键了...</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#number'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">===</span> <span class=\"token string\">\"1\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'没想到吧!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#number'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1.00001</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevVal <span class=\"token operator\">==</span> <span class=\"token number\">1.00001</span><span class=\"token punctuation\">)</span>  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#number'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">0.99999</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>prevVal <span class=\"token operator\">==</span> <span class=\"token number\">0.99999</span><span class=\"token punctuation\">)</span>  <span class=\"token function\">$</span><span class=\"token punctuation\">(</span><span class=\"token string\">'#number'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> <span class=\"token number\">1.00001</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>俗话说，万事先试，不试怎知？欲知后事如何，点下提取试试？</p>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/mbe8P2.png\" alt=\"mbe8P2\"></p>\n<p>看到 URL 了吧，出题者也怕难为各位的眼神了，故意摆了个 number 的 query？</p>\n<p>不改怎么知道是不是故意的，修改为 <code class=\"language-text\">?number=1</code> 后回车。</p>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/RI1NzD.jpg\" alt=\"RI1NzD\"></p>\n<p>欧了，结束本题。</p>\n<h2>2048</h2>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/w3Jj2R.png\" alt=\"w3Jj2R\"></p>\n<p>打开题目后，我先玩了几把 2048，但是由于太菜了始终没有靠实力解题XDDDD…</p>\n<p>不过我想，这题如果真的是考游戏能力的话，应该不会归类到 Web 吧，于是二话不说，打开看看源代码先？</p>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/CFWZnK.png\" alt=\"CFWZnK\"></p>\n<p>嗯，HTML 写的挺工整。不过都 0202 年了，还有人会把 changelog 注释在这？</p>\n<p>为了满足下好奇心，打开这个文件，看看它到底修复了啥。</p>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/pvvCwy.png\" alt=\"pvvCwy\"></p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">// 你细品，这个赢法也太 bug 了吧，就这还写 changelog...</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>won<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  url <span class=\"token operator\">=</span> <span class=\"token string\">\"/getflxg?my_favorite_fruit=\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token operator\">+</span><span class=\"token string\">'a'</span><span class=\"token operator\">+</span> <span class=\"token operator\">+</span><span class=\"token string\">'a'</span><span class=\"token operator\">+</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  url <span class=\"token operator\">=</span> <span class=\"token string\">\"/getflxg?my_favorite_fruit=\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>所以我就假装赢了，把上面这个 url 贴进去看看。</p>\n<p>对了，要是不知道这个 <code class=\"language-text\">toLowerCase()</code> 的结果是啥，带到 Console 里跑一下就清楚了。不过之前貌似在微博看过这类梗，所以上手直接就是一个 banana。</p>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/dju7Cm.jpg\" alt=\"dju7Cm\"></p>\n<h2>一闪而过的 Flag</h2>\n<p>这题的 Bug 之处，是点击下载后，是一个 .exe 文件…</p>\n<p>当时手头没有 Windows 系统，所以下次，请出题者好好考虑一下卑微的 macOS 用户。</p>\n<p>找来了个 Windows 10，你可以使用 xbox 的屏幕录像，也可以用手机拍视频。</p>\n<p>反正条条大路通罗马，不管是优雅的城镇路，还是破土路，它都是路。</p>\n<p>（鉴于我手头又没有 Windows 环境了，所以各位脑补下结果。</p>\n<p>（对了，要区分好 <code class=\"language-text\">i</code>、<code class=\"language-text\">l</code>、<code class=\"language-text\">I</code> 和 <code class=\"language-text\">1</code>，你可以用火眼金睛，也可以讨巧地修改下 cmd 的字体。总之随便你，只要你填对了 flag，就牛逼。</p>\n<h2>从零开始的记账工具人</h2>\n<p>本来以为一个 Excel 表格有啥难度，但是打开就懵了。</p>\n<p>原来金额大写的那堆单元格，不是数字直接设置样式渲染的，而是份量很足的、真实的中文大写金额文字…</p>\n<p>好吧，先找了个 JS 金额大写转小写的脚本，再找了个空行转数组的工具。一手进，一手出。</p>\n<p>后面再把输出的数字们贴回去 Excel 里，乘上数量再算个 SUM，结果就出来了。</p>\n<p>（我这个是傻办法，Node 一把梭更简单，当时脑袋没开光 😀️</p>\n<blockquote>\n<p>由于时间原因，后续的代码啥的之后补上，但也有可能就 🕊️ 了，这些都 谷饹 / 拜度 得到。</p>\n</blockquote>\n<h2>233 同学的 Docker</h2>\n<p>这道题困了很久，一直的思路是如何把 <code class=\"language-text\">/bin/sh -c rm /code/flag.txt</code> 这层 layer 删除，但是看了很久，没有这种解决方法。</p>\n<p>但我在一遍又一遍的重新拉取中，察觉到每层 layer 都是需要下载并在本地做 diff 的，这就说得通了，可能这个文件还缓存在某个角落。</p>\n<p>于是我开始了下面这行操作：</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">find</span> / -name flag.txt</code></pre></div>\n<p>会发现有两个符合的文件，接着一个个 <code class=\"language-text\">cat</code> 就好。</p>\n<p><img src=\"http://blog-tocz9ea.test.upcdn.net/img/mtrJky.jpg\" alt=\"mtrJky\"></p>\n<h2>Summary</h2>\n<p>这些题目严格意义上，不算是正经的 CTF。（正经 CTF 可比这个无聊多了）</p>\n<p>玩完这些，看看 dalao 们的 WriteUp。</p>\n<p>我只能说：</p>\n<p>我不敢了… 下次还来！</p>","frontmatter":{"title":"Hackergame 2020 Writeup","date":"November 08, 2020","description":"太久没玩了。（我个菜鸡）"}}},"pageContext":{"slug":"/hackergame-2020-writeup/","previous":{"fields":{"slug":"/credit-card-in-my-life/"},"frontmatter":{"title":"浅谈信用卡中的生活"}},"next":null}},"staticQueryHashes":["1353881592","2841359383"]}